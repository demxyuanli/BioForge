# 操作说明

从环境配置到效果评估的完整操作指南，首次使用请按章节顺序阅读。

本说明分为：（1）快速开始、（2）初始化与环境、（3）工作区说明、（4）推荐工作流、（5）阶段验收、（6）失败恢复、（7）快捷方式、（8）常见问题、（9）数据与隐私。

---

## 1. 快速开始

### 五步上手

1. 运行设置向导（文件 > 打开设置向导）：设置文档目录与数据库路径，完成向导。
2. 配置模型：打开设置（齿轮或 视图 > 隐私中心），进入「模型」，填写云端 API 密钥或确保本地 Ollama 已运行。
3. 添加数据源：在「文件资源」中添加挂接点（文件夹），上传或放入文件，等待处理完成。
4. 生成训练数据：在「训练实验室」选择知识点、可选技能，生成并审核指令-响应对。
5. 微调与评估：在「生产调优」提交微调任务；在「效果评估」用同一提示词对比基线模型与微调后结果。

---

## 2. 初始化与环境（详细）

### 存储与环境

- 文档与数据库使用专用目录，避免与系统目录混用；保存后在设置中确认路径正确。
- 云端：先保存 API 密钥，再选择平台与模型。本地：先启动 Ollama 并确认可访问后再生成。
- 添加文件前：确认挂接点可读、格式受支持（如 PDF、Word、Markdown），且命名稳定便于追溯。
- 首次使用：先单文档、小批量试跑，确认流程无误后再做批量处理。

---

## 3. 工作区说明

### 各工作区功能

- **仪表盘**：文档与任务概览，以及最近条目与活动的快捷入口。
- **文件资源**：添加/移除挂接点、上传文档、查看列表与状态、填写备注、打开文档预览或摘要。
- **知识库**：浏览与编辑知识点，设置关键字、权重与标签，管理用于检索与训练的内容。
- **数据中心**：上传文件、触发解析与知识抽取，查看生成的知识点与关键字。
- **训练实验室**：筛选知识点、可选技能，生成指令-响应候选，编辑或删除标注，导出 JSONL 用于微调。
- **生产调优**：选择训练数据、预估费用、向服务商提交微调任务，查看状态与日志。
- **效果评估**：定义模板与变量，对基线模型与微调模型使用同一提示词，并对比输出。
- **技能**：定义可执行能力（怎么做）并关联规则（约束）。在训练与微调时，所选技能及其规则会注入到提示中。
- **对话**：基于知识库检索进行问答，用于验证内容与检索效果。
- **设置**：存储路径、模型与 API 密钥、隐私（API 键、脱敏与审计日志）、上下文选项。

### 3.1 技能与规则的使用

- **规则（规则标签）**：创建规则，填写名称、分类与内容（必须/禁止、命名与架构约束等），规则可被多个技能复用。
- **技能（技能标签）**：创建技能，填写名称、描述、触发条件、步骤、输出说明与示例；在「关联规则」中勾选要绑定的规则。
- 在训练实验室或生产调优中选择需要的技能后，应用会将所选技能及其关联规则注入到生成提示中。
- 技能上的「内联规则」为保留项，建议以「关联规则」为主，便于一条规则被多个技能共用。

### 3.2 设置与隐私

- **常规**：存储路径与应用偏好。**模型**：云端 API 密钥与模型选择，或本地 Ollama。
- **隐私标签**：管理 API 密钥、查看脱敏日志与审计日志。可通过 视图 > 隐私中心 直接打开设置并定位到隐私标签。
- **上下文**：调整各工作流中模型与知识使用方式的选项。

---

## 4. 推荐工作流

### 端到端顺序

1. **文档**：添加挂接点与文件，确保每份文档处理完成并出现在列表中。
2. **知识**：审核与整理知识点（去噪、设权重与关键字）；可在数据中心做批量上传与处理。
3. **标注**：在训练实验室选择知识点与技能，生成候选，审核质量，保存有效的指令-响应对。
4. **微调**：在生产调优中选择数据集、查看费用、提交任务并跟踪进度与日志。
5. **评估**：对基线模型与微调模型使用同一提示模板，对比结果并迭代。

---

## 5. 阶段验收标准

### 各阶段完成标准

- **文档**：每份文件已处理并产出稳定知识点。
- **知识**：核心点保留、噪声已清理、关键字覆盖主要术语。
- **标注**：指令与响应一致且基于所选知识。
- **微调**：任务可查、日志可读、失败原因明确。
- **评估**：同一提示下，微调后输出在结构、准确度或相关性上更好。

---

## 6. 失败恢复

### 出错时如何处理

- **处理失败**：检查文件格式与内容，先对单文档重试。
- **生成失败**：放宽筛选、缩短提示，并确认模型/API 正常。
- **微调失败**：查看任务日志与平台报错，调整参数后重新提交。
- **评估不稳定**：固定模板与变量，多轮对比后再改数据集。

---

## 7. 快捷方式

### 键盘与界面

- **Alt+H** 打开帮助，选择「文档」或「关于」。
- **Alt + 字母** 打开顶部菜单（F/K/T/P/V/L/S/H）。
- **Escape** 关闭当前下拉菜单。
- **右上角语言按钮** 切换中英文。

---

## 8. 常见问题

### 常见情况

- **后端不可用**：通过托盘启动或重启后端。
- **模型报错**：检查 API 密钥、端点、所选模型与网络。
- **无标注**：放宽筛选并确认已选知识点存在。
- **任务卡住**：打开任务详情与日志查看服务商返回错误。

---

## 9. 数据与隐私

### 建议

- 挂接点尽量限定在项目专用目录。
- API 密钥仅通过设置保存，以使用加密存储。
- 定期在隐私中心查看审计与脱敏日志。
